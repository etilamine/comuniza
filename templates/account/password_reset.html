{% extends 'base.html' %}
{% load static %}
{% load i18n %}
{% block title %}{% translate "Reset Password" %} - {{ SITE_NAME }}{% endblock %}

{% block content %}
<div class="container container-sm">
    <div class="py-xl">
        <!-- Header -->
        <div class="text-center mb-2xl">
            <h1 class="mb-sm">[{% translate "RESET PASSWORD" %} ]</h1>
            <p class="text-secondary">{% translate "RECOVER YOUR ACCOUNT" %}</p>
        </div>

        <div style="max-width: 500px; margin: 0 auto;">
            <div class="card">
                <div class="card-header">
                    <h3 class="mb-0 text-sm">▸ {% translate "PASSWORD RECOVERY" %}</h3>
                </div>
                <div class="card-body">
                    {% if user.is_authenticated %}
                        <div class="alert alert-info mb-lg">
                            <p class="mb-0">{% translate "YOU ARE CURRENTLY LOGGED IN. GO TO YOUR PROFILE TO CHANGE YOUR PASSWORD" %}.</p>
                        </div>
                        <a href="{% url 'users:profile' %}" class="btn btn-primary btn-block">
                            [{% translate "GO TO PROFILE" %} ]
                        </a>
                    {% else %}
                        <p class="text-secondary mb-lg" style="font-size: var(--font-size-sm);">
                            {% translate "ENTER YOUR EMAIL ADDRESS AND WE'LL SEND YOU INSTRUCTIONS TO RESET YOUR PASSWORD" %}.
                        </p>

                        <form method="post" action="{% url 'account_reset_password' %}">
                            {% csrf_token %}

                            {% if form.non_field_errors %}
                                <div class="alert alert-danger mb-lg">
                                    {% for error in form.non_field_errors %}
                                        <p class="mb-0">{{ error }}</p>
                                    {% endfor %}
                                </div>
                            {% endif %}

                            <div class="form-group">
                                <label for="id_email" class="form-label form-label-required">{% translate "EMAIL" %}</label>
                                <input
                                    type="email"
                                    name="email"
                                    id="id_email"
                                    class="form-control {% if form.email.errors %}is-invalid{% endif %}"
                                    placeholder="{% translate 'your@email.com' %}"
                                    required
                                    autocomplete="email"
                                    value="{{ form.email.value|default:'' }}"
                                >
                                {% if form.email.errors %}
                                    {% for error in form.email.errors %}
                                        <div class="form-error">{{ error }}</div>
                                    {% endfor %}
                                {% endif %}
                            </div>

                            <button type="submit" class="btn btn-primary btn-block btn-lg mb-md">
                                [{% translate "SEND RESET LINK" %} ]
                            </button>

                            <div class="text-center">
                                <a href="{% url 'account_login' %}" class="text-sm">
                                    ← {% translate "BACK TO LOGIN" %}
                                </a>
                            </div>
                        </form>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_css %}
<style>
    .form-control:focus {
        transform: translate(-2px, -2px);
    }
</style>
{% endblock %}
